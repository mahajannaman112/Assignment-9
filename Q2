#include <iostream>
#include <list>
using namespace std;

class Graph {
    int V;
    list<int> *adj;
    int visited[100];

public:
    Graph(int v) {
        V = v;
        adj = new list<int>[V+1];
        for(int i=0;i<=V;i++) visited[i] = 0;
    }

    void addEdge(int u, int v){
        adj[u].push_back(v);
        adj[v].push_back(u);
    }

    void dfsUtil(int node){
        visited[node] = 1;
        cout << node << " ";

        for(int neigh : adj[node]){
            if(!visited[neigh])
                dfsUtil(neigh);
        }
    }

    void DFS(int src){
        cout << "DFS: ";
        dfsUtil(src);
    }
};

int main(){
    int n, m;
    cin >> n >> m;

    Graph g(n);

    for(int i=0;i<m;i++){
        int u,v;
        cin >> u >> v;
        g.addEdge(u,v);
    }

    int src;
    cin >> src;

    g.DFS(src);
}
